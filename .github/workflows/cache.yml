name: Cache dependencies

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-24.04

    steps:
    - name: Checkout code
      uses: actions/checkout@v6.0.2

    - name: Setup node.js
      uses: actions/setup-node@v6
      with:
        node-version: '18'

    - name: Install dependencies
      run: npm ci

    - name: Build frontend
      run: npm run build

    - name: Create offline dev package
      run: |
        tar -czf offline-dev-env.tar.gz \
          node_modules/ \
          package.json \ 
          package-lock.json \ 
          tsconfig.json \ 
          tsconfig.app.json \ 
          tsconfig.node.json \
          vite.config.ts \ 
          vite.dev.config.ts \
          src/

    - name: upload
      uses: actions/upload-artifact@v6.0.0
      with:
        name: offline-dev-environment
        path: offline-dev-env.tar.gz
        retention-days: 1
    
